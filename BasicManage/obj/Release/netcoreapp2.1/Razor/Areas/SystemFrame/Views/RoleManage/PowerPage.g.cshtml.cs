#pragma checksum "E:\VS2017\ASP.NET Core\LotteryAnalysisManage\LotteryAnalysisManage\Areas\SystemFrame\Views\RoleManage\PowerPage.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "54f5941205abe9ce7326579912b4cb087180a6b8"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Areas_SystemFrame_Views_RoleManage_PowerPage), @"mvc.1.0.view", @"/Areas/SystemFrame/Views/RoleManage/PowerPage.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Areas/SystemFrame/Views/RoleManage/PowerPage.cshtml", typeof(AspNetCore.Areas_SystemFrame_Views_RoleManage_PowerPage))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"54f5941205abe9ce7326579912b4cb087180a6b8", @"/Areas/SystemFrame/Views/RoleManage/PowerPage.cshtml")]
    public class Areas_SystemFrame_Views_RoleManage_PowerPage : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(0, 643, true);
            WriteLiteral(@"<div style=""margin-top:20px;"">
    <div class=""layui-form"">
        <div class=""layui-form-item"">
            <div class=""layui-collapse"" lay-filter=""test"" style=""width:400px"" id=""NodeList"">
            </div>
        </div>
        <div class=""layui-form-item"">
            <div class=""layui-input-block"">
                <button class=""layui-btn layui-btn-normal"" lay-submit lay-filter=""*"">保  存</button>
                <button class=""layui-btn layui-btn-warm"" onclick=""cancelBtnClick()"">关  闭</button>
            </div>
        </div>
        <input type=""hidden"" name=""roleId"" id=""roleId"" value="""" />
    </div>
</div>
<link");
            EndContext();
            BeginWriteAttribute("href", " href=\"", 643, "\"", 690, 1);
#line 16 "E:\VS2017\ASP.NET Core\LotteryAnalysisManage\LotteryAnalysisManage\Areas\SystemFrame\Views\RoleManage\PowerPage.cshtml"
WriteAttributeValue("", 650, Url.Content("~/js/layui/css/layui.css"), 650, 40, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(691, 29, true);
            WriteLiteral(" rel=\"stylesheet\" />\r\n<script");
            EndContext();
            BeginWriteAttribute("src", " src=\"", 720, "\"", 760, 1);
#line 17 "E:\VS2017\ASP.NET Core\LotteryAnalysisManage\LotteryAnalysisManage\Areas\SystemFrame\Views\RoleManage\PowerPage.cshtml"
WriteAttributeValue("", 726, Url.Content("~/js/jquery.min.js"), 726, 34, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(761, 19, true);
            WriteLiteral("></script>\r\n<script");
            EndContext();
            BeginWriteAttribute("src", " src=\"", 780, "\"", 821, 1);
#line 18 "E:\VS2017\ASP.NET Core\LotteryAnalysisManage\LotteryAnalysisManage\Areas\SystemFrame\Views\RoleManage\PowerPage.cshtml"
WriteAttributeValue("", 786, Url.Content("~/js/layui/layui.js"), 786, 35, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(822, 40, true);
            WriteLiteral("></script>\r\n<script>\r\n    var roleid = \"");
            EndContext();
            BeginContext(863, 14, false);
#line 20 "E:\VS2017\ASP.NET Core\LotteryAnalysisManage\LotteryAnalysisManage\Areas\SystemFrame\Views\RoleManage\PowerPage.cshtml"
             Write(ViewBag.RoleId);

#line default
#line hidden
            EndContext();
            BeginContext(877, 47, true);
            WriteLiteral("\";\r\n    $(\"#roleId\").val(roleid);\r\n    $.post(\"");
            EndContext();
            BeginContext(925, 80, false);
#line 22 "E:\VS2017\ASP.NET Core\LotteryAnalysisManage\LotteryAnalysisManage\Areas\SystemFrame\Views\RoleManage\PowerPage.cshtml"
       Write(Url.Action("GetNodeTreeDataBusiness","NodeManage", new { area = "SystemFrame" }));

#line default
#line hidden
            EndContext();
            BeginContext(1005, 355, true);
            WriteLiteral(@""", {}, function (data, status) {
        if (status == ""success"") {
            loadNode(data);
        }
    }, ""json"");
    function loadNode(data) {
        var htmlobj = """";
        $.ajax(
                {
                    async: false,
                    type: 'POST',
                    dataType:'json',
                    url: '");
            EndContext();
            BeginContext(1361, 70, false);
#line 34 "E:\VS2017\ASP.NET Core\LotteryAnalysisManage\LotteryAnalysisManage\Areas\SystemFrame\Views\RoleManage\PowerPage.cshtml"
                     Write(Url.Action("GetRolePower", "RoleManage", new { area = "SystemFrame" }));

#line default
#line hidden
            EndContext();
            BeginContext(1431, 2779, true);
            WriteLiteral(@"',
                    data:
                        {
                            RoleId: roleid
                        },
                    success: function (nodedata) {
                        $.each(data, function (i) {
                            if (data[i].ParentNode == null) {
                                htmlobj += ""<div class='layui-colla-item'>""
                                        + ""<h2 class='layui-colla-title'>"" + data[i].NodeName + ""</h2>""
                                        + ""<div class='layui-colla-content' id='"" + data[i].Id + ""'>"";
                                $.each(data, function (j) {
                                    if (data[j].ParentNode == data[i].Id) {
                                        if (getIsPower(data[j].Id, nodedata) == true) {
                                            htmlobj += ""<p><input type='checkbox' name='"" + data[j].Id + ""' title='"" + data[j].NodeName + ""' value='"" + data[j].Id + ""|"" + data[j].ParentNode + ""'  checked='' ></p>""");
            WriteLiteral(@";
                                        }
                                        else {
                                            htmlobj += ""<p><input type='checkbox' name='"" + data[j].Id + ""' title='"" + data[j].NodeName + ""' value='"" + data[j].Id + ""|"" + data[j].ParentNode + ""' ></p>"";
                                        }
                                    }
                                });
                                htmlobj += ""</div>""
                                + ""</div>"";
                            }
                        });
                    }
                }
                );
        $(""#NodeList"").html(htmlobj);
        layui.use(['element', 'form'], function () {
            var element = layui.element();
            var form = layui.form();
            form.on('submit(*)', function (data) {
                debugger;
                saveBtnClick(data);
                return false;
            });

        });
    }
    function getIsPower(or");
            WriteLiteral(@"inode, rolenodedatas) {
        var ret = false;
        $.each(rolenodedatas, function (i) {
            if (rolenodedatas[i].NodeId == orinode) {
                ret = true;
                return false;
            }
        });
        return ret;
    }
    function cancelBtnClick() {
        var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
        parent.initData();
        parent.layer.close(index); //再执行关闭
    }
    function saveBtnClick(data) {
        var loadingFlag = layer.load(1, {
            shade: [0.2, '#fff'] //0.1透明度的白色背景
        });
        $.ajax(
                {
                    async: false,
                    type: 'POST',
                    url: '");
            EndContext();
            BeginContext(4211, 73, false);
#line 97 "E:\VS2017\ASP.NET Core\LotteryAnalysisManage\LotteryAnalysisManage\Areas\SystemFrame\Views\RoleManage\PowerPage.cshtml"
                     Write(Url.Action("UpdateRolePower", "RoleManage", new { area = "SystemFrame" }));

#line default
#line hidden
            EndContext();
            BeginContext(4284, 366, true);
            WriteLiteral(@"',
                    data: data.field,
                    success: function (datafield) {
                    layer.close(loadingFlag);
                        if (datafield == ""success"") {
                            layer.msg('保存成功', { icon: 1 });
                        }
                    }
                }
                );
    }
</script>
");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
